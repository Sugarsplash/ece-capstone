#include "lib/pin_defs.sblib"
#include "lib/gpio.sblib"

FUNCTION soil_read()

    DIM result : result = GpioSetFunc(SOIL_DATA, ANALOG_IN, ADC_10BIT)

    ' GPIO not set correctly, return nonsensical value
    IF result != 0 THEN
        EXITFUNC -1
    ENDIF

    DIM moisture : moisture = GpioRead(SOIL_DATA)
    
ENDFUNC moisture